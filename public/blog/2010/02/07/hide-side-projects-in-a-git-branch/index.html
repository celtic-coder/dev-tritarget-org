
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Hiding side projects in a Git branch - TriTarget</title>
  <meta name="author" content="Devin Weaver">

  
  <meta name="description" content="So I found this really cool trick. A way to use Git branches to store complete
new repositories inside another. What I mean is basically hiding a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://tritarget.org/blog/2010/02/07/hide-side-projects-in-a-git-branch">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="TriTarget" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

<!-- Load jQuery -->
<!-- <link rel="stylesheet" href="/css//jquery-ui.css" type="text/css" media="all" /> -->
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes//jquery-ui.css" type="text/css" media="all"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.4/jquery-ui.min.js" type="text/javascript"></script>

<!-- Custom Scripts -->
<script language="javascript" type="text/javascript" src="/javascripts/site.js"> </script>
<script language="Javascript" type="text/javascript">
    $(document).ready(function() {
        site.initDialogBoxes();

        site.initKonamiCode();
    });
</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30456823-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">TriTarget</a></h1>
  
    <h2>A blog of personal quality</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:tritarget.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/badges">Badges</a></li>
  <li><a href="/projects">Codeing</a></li>
  <li><a href="http://photos.tritarget.org/">Photography</a></li>
  <li><a href="/stories">Creative Writing</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Hiding Side Projects in a Git Branch</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-07T00:00:00-05:00" pubdate data-updated="true">Feb 7<span>th</span>, 2010</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>So I found this really cool trick. A way to use Git branches to store complete
new repositories inside another. What I mean is basically hiding a side
project in a Git branch. This is great for things like unmodified images, HTML
source for a project page attached to the project itself, documentation,
storing large files that are not needed with every clone of the master branch,
storing approved copies of libraries and other dependencies.</p>

<p>I use this feature to store meta data on a project for example many of my
website projects have the actual web files but the design was first created
using comps (usually blank markups and/or Photoshop files). Once I use these
comps to make the site they are usually no longer needed. However later down
the road when I need to reference them because the client wished for a change
I find them deleted. I though about storing them out on the server but then
there is two locations I have to remember instead of the source repository.</p>

<p>In the SVN days I used to add a forth directory:</p>

<pre><code>Root
|+Tags
|+Branches
|+Trunk
`+Comps
</code></pre>

<p>There were the usual directories and another for the comps. Working on the
source you would checkout the Trunk directory and never see Comps unless you
checked it out manually.</p>

<p>Git also allows this only much easier and cleaner. And Github has a great how to
with there <a href="http://pages.github.com/">Github Pages</a> section and also from this <a href="http://madduck.net/blog/2007.07.11:creating-a-git-branch-without-ancestry/">blog post</a>.
However I&#8217;ll repost the instructions here.</p>

<p><strong>Make sure you have no local or un-committed changes or they will be lost!</strong></p>

<p>First create a new symbolic reference to a new branch. We don&#8217;t make a new
branch in the normal way because it will link itself to the current HEAD and
what we want it to link it to nothing. That way any files on the new branch
are unassociated to any branches you make with your code.</p>

<pre><code>$ git symbolic-ref HEAD refs/head/newbranch
</code></pre>

<p>This will create the new branch <em>and</em> put you in that branch. Next is a bit
strange. Since the <em>index</em> that Git knows about still has all the files in
the master branch and so doing a <code>git status</code> will show all those files ready
to be committed. This isn&#8217;t what we want we need to clear out the index.
Easiest way is to delete the index file since Git will recreate it if missing.
It will recreate it properly based on the branch we are in.</p>

<pre><code>$ rm .git/index
</code></pre>

<p>Last but not least all those files are still in the working directory. It&#8217;s a
pain to go through and <code>rm -rf</code> everything (And dangerous) make Git do it with
a clean.</p>

<pre><code>$ git clean -fdx
</code></pre>

<p><strong>UPDATE: This branch now needs to manually be attached</strong></p>

<p>Turns out (maybe a version thing) that I was unable to use the new branch
created before because git claimed it was detached. After I had commited
something (important or git thinks the branch hasn&#8217;t been born yet) I had to
explicitly check out the new branch for it to work:
<code>git checkout -b newbranch</code></p>

<p>Now Your ready. Add some files, Commit them and eventually push them.</p>

<pre><code>$ git push origin newbranch
</code></pre>

<p>What&#8217;s great is a clone by anyone will get the master branch and ignore this
new branch unless they need it and they pull it manually.</p>

<p><strong>UPDATE: full walk through</strong></p>

<pre><code>(no branch)$ git init test_repo
Initialized empty Git repository in /Users/suki/tmp/test_repo/.git/
(no branch)$ cd test_repo/
(master)$ echo "test data in master" &gt; testdata-in-master
(master)$ git add testdata-in-master
(master)$ git ci -m "First commit on master branch"
[master (root-commit) b879d9f] First commit on master branch
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 testdata-in-master
(master)$ git symbolic-ref HEAD refs/head/newbranch
(refs/head/newbranch)$ rm .git/index
(refs/head/newbranch)$ git clean -fdx
Removing testdata-in-master
(refs/head/newbranch)$ echo "test data in newbranch" &gt; testdata-in-newbranch
(refs/head/newbranch)$ git add testdata-in-newbranch
(refs/head/newbranch)$ git ci -m "First commit on newbranch branch"
[refs/head/newbranch (root-commit) ac63f64] First commit on newbranch branch
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 testdata-in-newbranch
(refs/head/newbranch)$ git checkout -b newbranch
Switched to a new branch 'newbranch'
(newbranch)$ git push origin newbranch
fatal: 'origin' does not appear to be a git repository
fatal: The remote end hung up unexpectedly
(newbranch)$ ls
testdata-in-newbranch
(newbranch)$ git checkout master
Switched to branch 'master'
(master)$ ls
testdata-in-master
</code></pre>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Devin Weaver</span></span>

      








  


<time datetime="2010-02-07T00:00:00-05:00" pubdate data-updated="true">Feb 7<span>th</span>, 2010</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://tritarget.org/blog/2010/02/07/hide-side-projects-in-a-git-branch/" data-via="sukima" data-counturl="http://tritarget.org/blog/2010/02/07/hide-side-projects-in-a-git-branch/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/02/05/markdown-editor-on-ipad-iphone/" title="Previous Post: Markdown editor on an iPad or iPhone?">&laquo; Markdown editor on an iPad or iPhone?</a>
      
      
        <a class="basic-alignment right" href="/blog/2010/07/16/irssi-notifications-over-ssh/" title="Next Post: Remote irssi notifications via ssh">Remote irssi notifications via ssh &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
<section>
  <img src="http://gravatar.com/avatar/a33233f156a5531707f130c28565de69" alt="Gravatar image" title="Gravatar Image" />
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/weaver.devin@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/08/17/im-getting-married-no-really/">I'm getting married no really</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/02/24/do-presentations-need-to-be-this-complicated/">Do presentations need to be this complicated?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/01/11/keeping-track-of-your-todo/">Keeping track of your todo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/26/source-code-is-not-documentation/">Source code is NOT documentation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/18/why-is-testing-so-hard/">Why is testing so hard</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("sukima", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/sukima" class="twitter-follow-button" data-show-count="false">Follow @sukima</a>
  
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/sukima">@sukima</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'sukima',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="flickr">
<h1>Flickr</h1>
<style type="text/css">
	#flickrList li{ text-align: center; }
</style>
<ul id="flickrList"></ul>

<script lang="Javascript">
var flickrNickname = "SirSuki";

function jsonFlickrApi(rsp) {

	if (rsp.stat != "ok"){
  		return;
 	}

 	var list = "";

 	for (var i=0; i < rsp.photos.photo.length; i++) {
 	
  		var photo    = rsp.photos.photo[i];
  		var imgUrl   = 'http://farm'+ photo.farm +'.static.flickr.com/'+ photo.server +'/'+ photo.id +'_'+ photo.secret +'_m.jpg';
  		var photoUrl = 'http://www.flickr.com/photos/'+ flickrNickname +'/'+ photo.id;

  		list += '<li id="flickrItem_'+i+'"><a href="'+ photoUrl +'" title="'+ photo.title +'"><img alt="'+ photo.title +'" src="'+ imgUrl +'" /></a></li>';
 	}
 	
 	list += '<li class="flickrLink"><a href="http://www.flickr.com/photos/'+ flickrNickname + '">Flickr page</a></li>';
 	
 	document.getElementById('flickrList').innerHTML = list;
}
</script>
<script lang="Javascript" src="http://api.flickr.com/services/rest/?format=json&method=flickr.photos.search&user_id=55325630@N02&per_page=5&api_key=631ea8b903507b0dedec09169d5774e5"></script>

</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Devin Weaver -
  <a href="/humans.txt"><img class="bottom-img" src="/images/humanstxt.png" alt="humans.txt" width="88" height="31" /></a> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'devtritargetorg';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://tritarget.org/blog/2010/02/07/hide-side-projects-in-a-git-branch/';
        var disqus_url = 'http://tritarget.org/blog/2010/02/07/hide-side-projects-in-a-git-branch/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<!-- Easter egg dialog -->
<div id="dialog-boxes">  
    <!-- #customize your modal window here -->  
    <div id="game" class="window"></div>  
    <!-- Do not remove div#mask, because you'll need it to fill the whole screen -->    
    <div id="mask"></div>  
</div>  


</body>
</html>
